# 里氏替换原则

## 1. 概念
子类对象（object of subtype/derived class）能够替换程序（program）中父类对象（object of base/parent class）出现的任何地方，并且保证原来程序的逻辑行为（behavior）不变及正确性不被破坏。继承必须确保超类所拥有的性质在之类中仍然成立。


## 2. 违反里氏替换原则的例子
### 2.1 之类违背父类声明要实现的功能
例如：父类的一个方法 `sortByAmonut`，是按照余额排序。
但子类重写了之后，以时间排序了


### 2.2 之类违背父类对输入、输出和异常的约定
例如：父类一个获取卡号的方法，父类异常情况会返回空串，子类重写后不能改成返回 null 这类行为

```java
public class Parent{
	public String getCardNo(String userId) {
		if (StringUtils.Blank(userId)) {
			return "";
		}
		return findCardNoByUserId(userId);	
	}
}


public class Children{
	public String getCardNo(String userId) {
		if (StringUtils.Blank(userId)) {
			return null; // 改变了父类行为，不符合LSP
		}
		return findCardNoByUserId(userId);
	}
}

```


### 2.3 之类违背父类注释中说罗列的任何特殊说明
例如：父类的一个方法用于提取余额，注释中标明不能透支，之类重写后却能透支


## 3. 代码示例
**场景：**
有 2 类银行卡【储蓄卡，信用卡】，储蓄卡能提现，储蓄；信用卡能借款，还款。

### 3.1 错误示例
> 储蓄卡作为父类，有 3 个方法【提现，储蓄，查流水】。信用卡类继承储蓄卡类，并分别重写提现和储蓄方法为借款和还款。

```java

```


### 3.2 正确示例
> 抽象出一个银行卡类【加钱，减钱，获取卡号，获取开卡日期，查流水】，储蓄卡类和信用卡类都继承银行卡类。尽量不要重写父类的方法，如果需要重写父类的方法，需要保持行为一致。


```java

```





















## 参考
[重学Java设计模式-付政委-微信读书 (qq.com)](https://weread.qq.com/web/reader/bcf32900724708cbbcf08c1)

[设计模式之美 (geekbang.org)](https://time.geekbang.org/column/intro/100039001)